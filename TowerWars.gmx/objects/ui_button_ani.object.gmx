<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_ui</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Copyright (c) 2013 NailBuster Software Inc.  all rights reserved.
/**********************

  This source code is provided 'as-is', without any express or implied warranty. 
  In no event will NailBuster Software Inc. be held liable for any damages arising from the use of this software.

      Permission is granted to use these components for non commercial applications, and to alter it for your needs,
    subject to the following restrictions:
    
  1. The origin of this software must not be misrepresented; you must not claim that you wrote the original source code 
     or components. If you use this software in a application, an acknowledgment in the product about/documentation would be appreciated but is not required.
  2. Altered source versions must be plainly marked as such, and must not be misrepresented as being the original software.
     You cannot distribute your modified sources of our component suite outside of your company.
  3. You cannot use this source or components in a tool or package designed to compete with NailBuster GUI component Suite. 
     For example,  you cannot modify and/or  improve these components and release under another component suite name.
  4. You cannot redistribute these source files outside of your compiled projects. All original Sources Files/Documentation 
     must originate from NailBuster Software Inc.  You cannot host or redistribute these source files. 
  
  If your application is used for commercial purposes, and will generate revenue directly or indirectly then you are required to 
  purchase a commercial license from NailBuster Software Inc.  Please visit www.nailbuster.com for purchasing information.
  If you have any questions about the license please contact us at david@nailbuster.com

**********************/


event_inherited();

uiAlignV= fa_middle;
uiButtonState = 0;  //0 = up, 1 = down
uiButtonEnabled= true;
uiButtonSprite= -1;
uiSpriteIndex=0;
uiSpriteAlign=fa_center;
uiSpriteAlignV=fa_middle;
uiSpriteScale=1.0;
uiPressFlash=false;
uiPressColor=c_yellow;
uiDownColor=c_green;
uiFlashButton=false;
uiFlashCounter=0;
uiBackColor2 = 0;
uiAlign = fa_center;  //default text to enter
uiTextColor = c_white; //default button color
uiBackColor = c_navy;
uiBackColor2 = c_blue;
uiIsToggle = false;   
uiButtonGroup = 0;      //button group
uiButtonLocked=false;
uiSpriteAngle=0;
uiEnforceFocus=true; //check if button was in focus on press
drawpress = false;
hasfocus = false;

//animate stuffs
CurWobble=0;
CurPulse=1;
CurFading=1;
CurSparkle=0;
CurTextWobble=0;
uiTextFixed=false;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var i,otherbuts;

if uiIsToggle { if uiButtonState==0 uiButtonState=1; else uiButtonState=0; }

if uiButtonGroup&gt;0
    {
          for (i = 0; i &lt; instance_number(ui_button); i += 1)
             {  otherbuts=instance_find(ui_button,i); 
                if (otherbuts.uiButtonState==1 &amp;&amp; otherbuts.uiButtonGroup==uiButtonGroup)
                    otherbuts.uiButtonState=0;   //if down then make up                                
             }
          uiButtonState=1;  //make this button the down button now!                         
    }

drawpress=false;
hasfocus=false;

uiFlashButton=false;
var evNum;
evNum=uiEventNum;
if uiEventObject != noone
 if object_exists(uiEventObject) then
  with (uiEventObject) 
   {if evNum&gt;=0 event_user(evNum);}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (uiMouseHandle==false) || (uiEnabled==false) || (uiVisible==false) exit;

if uiButtonLocked exit;
drawpress=false;
hasfocus=false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (uiMouseHandle==false) || (uiEnabled==false) || (uiVisible==false) exit;

if (uiEnforceFocus) &amp;&amp;  (hasfocus==false) {drawpress=false; exit;}
if uiButtonLocked exit;
if uiPressFlash {
                  uiFlashButton=true;
                  alarm[0]=room_speed div 3;                 
                } else alarm[0]=1;   //call alarm to call object event.
              
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (uiMouseHandle==false) || (uiEnabled==false) || (uiVisible==false) exit;

event_inherited();



if uiButtonLocked exit;

drawpress=true;
hasfocus=true;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (uiMouseHandle==false) || (uiEnabled==false) || (uiVisible==false) exit;

if uiButtonLocked exit;
drawpress=true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Copyright (c) 2013 NailBuster Software Inc.  all rights reserved.
/**********************

  This source code is provided 'as-is', without any express or implied warranty. 
  In no event will NailBuster Software Inc. be held liable for any damages arising from the use of this software.

      Permission is granted to use these components for non commercial applications, and to alter it for your needs,
    subject to the following restrictions:
    
  1. The origin of this software must not be misrepresented; you must not claim that you wrote the original source code 
     or components. If you use this software in a application, an acknowledgment in the product about/documentation would be appreciated but is not required.
  2. Altered source versions must be plainly marked as such, and must not be misrepresented as being the original software.
     You cannot distribute your modified sources of our component suite outside of your company.
  3. You cannot use this source or components in a tool or package designed to compete with NailBuster GUI component Suite. 
     For example,  you cannot modify and/or  improve these components and release under another component suite name.
  4. You cannot redistribute these source files outside of your compiled projects. All original Sources Files/Documentation 
     must originate from NailBuster Software Inc.  You cannot host or redistribute these source files. 
  
  If your application is used for commercial purposes, and will generate revenue directly or indirectly then you are required to 
  purchase a commercial license from NailBuster Software Inc.  Please visit www.nailbuster.com for purchasing information.
  If you have any questions about the license please contact us at david@nailbuster.com

**********************/


var ymargin,disptx,px,py,bx,by,fx,yratio,drawbutdown,sprx,spry,sprxscale,spryscale,sprrot,curAlpha,curImageBlend,curZoomFactor,hoverEffect;

event_inherited();

if (uiZoomFactor==0.1) || (uiVisible==false) exit;  //for zooming   


curAlpha=uiAlpha;
curImageBlend=uiImageBlend;
curZoomFactor=uiZoomFactor;



disptx=uiTextValue;

     

draw_set_font(uiFont);
draw_set_halign(uiAlign);
draw_set_valign(fa_top);


if uiAnimated &amp;&amp; uiEnabled  //if animated enabled then do animation
  {
     if uiWobble != 0 
          {  
          CurWobble += uiWobbleSpeed;
          if CurWobble &gt; uiWobble  {uiWobbleSpeed *= -1;}                                       
          else if CurWobble &lt; (uiWobble * -1)  {uiWobbleSpeed *= -1;}
          }    
          
     if uiPulse != 0
         {
          CurPulse += uiPulseSpeed;
          if CurPulse &gt; 1+(uiPulse) {uiPulseSpeed *= -1;}
          else if CurPulse &lt; 1-(uiPulse) {uiPulseSpeed *= -1;}          
          curZoomFactor=CurPulse;         
         } 
         
     if uiFading != 0
         {
          CurFading += uiFadingSpeed;
          if CurFading &gt; 1 {uiFadingSpeed *= -1;}
          else if CurFading &lt; 1-(uiFading) {uiFadingSpeed *= -1;}          
          curAlpha=CurFading;         
         }             
  
  }


px=x;
py=y;
//textx=x;
//texty=y;
sprrot=0;

//determine state of button
drawbutdown=false;
if (uiButtonState==1 || drawpress) then drawbutdown=true;
if (drawbutdown==false) {bx=0;by=0;} else {bx=3;by=3;};  
if drawbutdown==false {curImageBlend=c_white;} else curImageBlend=uiBackColor;


//if there's a hover (mouse over).
hoverEffect=0;
if (uiHoverMode&gt;0) &amp;&amp; (drawbutdown==false) &amp;&amp; (uiEnabled)
    { if position_meeting(mouse_x,mouse_y,self.id)
       {
         if uiHoverMode==1   // {draw_sprite_ext(uiButtonSprite,uiSpriteIndex,sprx,spry,sprxscale,spryscale,sprrot,uiHoverColor,uiHoverAlpha)}         
            { curAlpha=uiHoverInfo;
              curImageBlend=uiHoverColor;
            } else
         if uiHoverMode==2
            { curZoomFactor=uiHoverInfo;
            } else
         if uiHoverMode==3   //don't know yet how to use this glow effect....
         { hoverEffect=1;}  //sets draw to glow affect at end of this draw;
       } //if mouse-over                      
     }//if hovermode      
                                 
if curZoomFactor != 1
   {
      image_xscale = uiOrigXscale * (curZoomFactor);
      image_yscale = uiOrigYscale * (curZoomFactor);
      px = x - ( ( ( curZoomFactor * uiOrigWidth) - uiOrigWidth) div 2 );
      py = y - ( ( ( curZoomFactor * uiOrigHeight) - uiOrigHeight) div 2 );           
   } else //if no zoom
      {image_xscale = uiOrigXscale;
       image_yscale = uiOrigYscale                  
      }     
       
  

if (uiDrawBackColor &amp;&amp; uiButtonState==0 &amp;&amp; uiDrawOutline==false)  //if draw background and state = up.
   {
    draw_set_color(c_gray);  
    draw_roundrect(px+3, py+3, px+sprite_width+3, py+sprite_height+3, false);   //fill
   } 
   
 
   
if (uiDrawBackColor)  
   {
    draw_set_color(uiBackColor);  
    if uiBackColor2==0 uiBackColor2=uiBackColor;
    if (drawbutdown==false)
       draw_roundrect_color(px+bx, py+by, px+sprite_width+bx, py+sprite_height+by, uiBackColor,uiBackColor2,uiDrawOutline);   //fill
       else draw_roundrect_color(px+bx, py+by, px+sprite_width+bx, py+sprite_height+by, uiDownColor,uiDownColor,uiDrawOutline);   //fill
   } 
   
if uiFlashButton then
   {
   uiFlashCounter +=1;
   fx = room_speed/30;
  if (uiFlashCounter mod (5*fx)) &lt; (3*fx)
        {
           draw_set_color(uiDownColor);  
           draw_roundrect(px+bx, py+by, px+sprite_width+bx, py+sprite_height+by, false);   //fill
        }             
   }    

sprxscale=uiSpriteScale;
spryscale=uiSpriteScale; 
      
if uiButtonSprite&gt;=0 then
   {
         if uiSpriteScale==0 { uiSpriteAlign=fa_left; uiSpriteAlignV=fa_top;}  //if auto-fit then no alignment.
     
         if uiSpriteAlign==fa_left { sprx=px; } 
            else if uiSpriteAlign==fa_center {sprx= px + ((sprite_width - (sprite_get_width(uiButtonSprite)*uiSpriteScale)) div 2); }
            else if uiSpriteAlign==fa_right {sprx = px+sprite_width - (sprite_get_width(uiButtonSprite)*uiSpriteScale); } 

         if uiSpriteAlignV==fa_top { spry=py; }
            else if uiSpriteAlignV==fa_middle { spry=py + ((sprite_height - (sprite_get_height(uiButtonSprite)*uiSpriteScale)) div 2);}  //center text vertically;
            else if uiSpriteAlignV==fa_bottom { spry=py +sprite_height - (sprite_get_height(uiButtonSprite)*uiSpriteScale); }
                
         if uiSpriteScale==0 { 
                               sprxscale= sprite_width / (sprite_get_width(uiButtonSprite));
                               spryscale= sprite_height / (sprite_get_height(uiButtonSprite));
                               sprx=px+ (sprite_get_xoffset(uiButtonSprite)* sprxscale);
                               spry=py+ (sprite_get_yoffset(uiButtonSprite)* spryscale);  
                             }                              
         sprrot=uiSpriteAngle + CurWobble;
         sprx=sprx+bx;
         spry=spry+by;                                                                                                           
         draw_sprite_ext(uiButtonSprite,uiSpriteIndex,sprx,spry,sprxscale,spryscale,sprrot,curImageBlend,curAlpha);         
                  
   }   
   

   
//draw button text if applicable...   

px=x;
py=y;
   
while (string_width(disptx+'X') * uiXscale) &gt; (sprite_width)
 { 
    disptx=string_delete(disptx,string_length(disptx),1);
    if string_length(disptx)&lt;2 break;  //failsafe
 }
 
if uiAlign==fa_left { px=px +5; } 
 else if uiAlign==fa_center {px= px + (uiOrigWidth div 2); }
   else if uiAlign==fa_right {px = px + uiOrigWidth -5; } 

if uiAlignV==fa_top { py= py+5; }
 else if uiAlignV==fa_middle { py=py+(uiOrigHeight - (string_height(disptx) )) div 2 ;}  //center text vertically;
    else if uiAlignV==fa_bottom { py=py+uiOrigHeight - (string_height(disptx))};
   
    
draw_set_color(uiTextColor);  
if uiTextFixed sprrot=0;  //don't angle the text!
if disptx != '' draw_text_transformed(px+bx,py+by,disptx,uiXscale,uiYscale,sprrot);   



// sparkle over stuffs for animation
if uiAnimated &amp;&amp; uiSparkle!= 0 &amp;&amp; uiEnabled
     {
       CurSparkle += uiSparkleSpeed;
       if (CurSparkle mod uiSparkle) == 0 
          {
            effect_create_above(ef_spark, x + random(sprite_width), y + random(sprite_height), choose(0, 1,2), merge_color(c_white, c_yellow, random(1)));
          }                    
     }
           
if uiAnimated &amp;&amp; uiGlowing!= 0 
     { hoverEffect=1;  //mimic glow on hover}
     }
     
     
if (hoverEffect==1) &amp;&amp; uiEnabled   //if hover glow or glowing set always;
          { CurFading += uiFadingSpeed;
           if CurFading &gt; max(0.6,uiGlowing) { CurFading=max(0.6,uiGlowing); uiFadingSpeed *= -1;}
           else if CurFading &lt; 0.1 { CurFading=0.1; uiFadingSpeed *= -1;}          
           draw_set_alpha(CurFading);
           draw_set_blend_mode(bm_add);
//           draw_circle_color(x + (uiOrigWidth div 2), y+ (uiOrigHeight  div 2 ), sprite_height div 2, c_white, c_black, 0);
           draw_ellipse_color(x, y, x+sprite_width, y+sprite_height, c_white, c_black, false);
           draw_set_blend_mode(bm_normal); 
           draw_set_alpha(uiAlpha);
          }              
     



</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
